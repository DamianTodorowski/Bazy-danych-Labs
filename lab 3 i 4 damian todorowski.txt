CREATE TABLE postac(id_postaci INT AUTO_INCREMENT, nazwa VARCHAR(40), rodzaj ¬-ENUM('wiking','ptak','kobieta'), data_ur DATE, wiek INT UNSIGNED, PRIMARY KEY(id_postaci));

INSERT INTO postac(nazwa,rodzaj,data_ur,wiek) VALUES('Bjorn','wiking','1657-10-28',35);
INSERT INTO postac(nazwa,rodzaj,data_ur,wiek) VALUES('Drozd','ptak','1843-05-12',200);
INSERT INTO postac(nazwa,rodzaj,data_ur,wiek) VALUES('Tesciowa','kobieta','1630-10-28',69);

UPDATE postac SET wiek = 88 WHERE nazwa = 'Tesciowa';

CREATE TABLE walizka(id_walizki INT AUTO_INCREMENT, pojemnosc INT UNSIGNED, kolor ENUM('rozowy','czerwony','teczowy','zolty'), id_wlasciciela INT, PRIMARY KEY(id_walizki), FOREIGN KEY(id_wlasciciela) REFERENCES postac(id_postaci)
ON DELETE CASCADE);


ALTER TABLE walizka MODIFY COLUMN kolor ENUM('rozowy','czerwony','teczowy','zolty') DEFAULT 'rozowy';

INSERT INTO walizka(pojemnosc,kolor,id_wlasciciela) VALUES (500,'teczowy',3);

INSERT INTO walizka(pojemnosc,kolor,id_wlasciciela) VALUES (500,'teczowy',1);

CREATE TABLE izba(adres_budynku VARCHAR(50) NOT NULL, nazwa_izby VARCHAR(50) NOT NULL, metraz INT UNSIGNED, wlasciciel INT, PRIMARY KEY(adres_budynku, nazwa_izby), FOREIGN KEY(wlasciciel) REFERENCES postac(id_postaci) ON DELETE SET NULL);

ALTER TABLE izba ADD kolor_izby VARCHAR(50) DEFAULT 'czarny' AFTER metraz;

INSERT INTO izba VALUES ('Wiejska 13','spizarnia',1000,'rozowy',1);	


CREATE TABLE przetwory(id_przetworu INT NOT NULL, rok_produkcji SMALLINT UNSIGNED DEFAULT '1654', id_wykonawcy INT, zawartosc VARCHAR(100), dodatek VARCHAR(50) DEFAULT 'papryczka chilli', id_konsumenta INT, PRIMARY KEY(id_przetworu), FOREIGN KEY (id_wykonawcy) REFERENCES postac(id_postaci), FOREIGN KEY (id_konsumenta) REFERENCES postac(id_postaci));

INSERT INTO przetwory(id_przetworu, id_wykonawcy, zawartosc, id_konsumenta) VALUES (1,1,'bigos',3);

INSERT INTO postac(nazwa,rodzaj,data_ur,wiek) VALUES ('ragnar',wiking','1989-11-11',30);
INSERT INTO postac(nazwa,rodzaj,data_ur,wiek) VALUES ('ivor','wiking','1989-09-10',20);
INSERT INTO postac(nazwa,rodzaj,data_ur,wiek) VALUES ('hubbe','wiking','1960-09-10',50);
INSERT INTO postac(nazwa,rodzaj,data_ur,wiek) VALUES ('erling','wiking','1970-04-20',34);
INSERT INTO postac(nazwa,rodzaj,data_ur,wiek) VALUES ('floki','wiking','1999-01-29',19);

CREATE TABLE statek(nazwa_statku VARCHAR(50) NOT NULL, rodzaj_statku ENUM('galera','zaglowka','motorowka'), data_wodowania DATE, max_ladownosc INT UNSIGNED, PRIMARY KEY(nazwa_statku));


INSERT INTO statek VALUES('kruk odyna', 'galera','1930-10-11',1990000);
INSERT INTO statek VALUES('plonacy drozd', 'zaglowka','1960-11-20',1000);

ALTER TABLE postac ADD funkcja VARCHAR(70);

UPDATE postac SET funkcja = 'kapitan' WHERE nazwa = 'Bjorn';

ALTER TABLE postac ADD nazwa_statku VARCHAR(70);

ALTER TABLE postac ADD FOREIGN KEY(nazwa_statku) REFERENCES statek(nazwa_statku);


UPDATE postac SET funkcja = 'zaloga', nazwa_statku='czarna drozda' WHERE rodzaj='wiking';


DELETE FROM postac WHERE rodzaj=’wiking’ and wiek>’47’;

#lub 

DELETE FROM postac WHERE rodzaj='wiking' ORDER BY wiek ASC limit 2;



  ALTER TABLE postac drop CONSTrAINT postac_ibfk_1;
  ALTER table przetwory DROP constraint przetwory_ibfk_2;
  ALTER table przetwory DROP constraint przetwory_ibfk_1;
  ALTER table walizka DROP constraint walizka_ibfk_1;
  ALTER TABLE izba drop constraint izba_ibfk_1;
      ALTER TABLE postac drop id_postaci;
      
      #lub 
      SET foreign_key_checks = 0;
     alter table postac drop id_postaci



  ALTER table postac ADD pesel char(11);
  ALTER table postac ADD primary key(pesel).
  
  ALTER table postac MODIFY COLUMN enum('wiking','ptak','kobieta','syrena');
   
   INSERT INTO postac(nazwa,rodzaj,data_ur,wiek,pesel) 
  VALUES('Gertruda Nieszczera','syrena','1966-02-04',30,'28572857298');
  
  
   update postac set czlonek_zalogi = 'kruk odyna' where nazwa like '%a%';
   
   #dałem 16 wiek bo nie chciało mi sie już zmieniać daty na 20 wiek.
   
   update statek set max_ladownosc=max_ladownosc * 0.7 where data_wodowania > '1600-01-01';
    
    alter table postac add check(wiek<=1000);
   
   
   
   
  
   
  

   ALTER table postac MODIFY COLUMN enum('wiking','ptak','kobieta','syrena','waz');
  
    Insert into postac(nazwa,rodzaj,data_ur,wiek,pesel)  VALUES ('Waz Loco','waz','1800-11-18',120,'12334578901');
  
  





